<!DOCTYPE html>
<html>
	<head>
		<title>fcc-pinterest</title>

		<% include ../snippets/head %>
	</head>
	<body>
		<% include ../snippets/navbar %>

		<div class="ui text container">
			<% if(typeof message != 'undefined') { %>
				<div class="ui big icon <%= message.type %> message">
					<% if(message.type == 'error') { %>
						<i class="warning sign icon"></i>
					<% } else { %>
						<i class="check circle outline icon"></i>
					<% } %>
					<i class="close icon"></i>
					<div class="">
						<div class="header"><%= message.header %></div>
						<div class="description"><%= message.description %></div>
					</div>
				</div>
				<% if(message.type == 'error') { %>
					<div class="ui segment">
						<form class="ui form" action="/new/link" method="post">
							<div class="field">
								<label>Title</label>
								<input placeholder="Link title" type="text" name="title">
							</div>
							<div class="field">
								<label>Image URL</label>
								<input placeholder="Image URL" type="text" name="image">
							</div>
							<div class="field">
								<label>Tags</label>
								<input placeholder="Tags" type="text" name="tags">
							</div>
							<button class="ui large primary button" type="submit">Send</button>
						</form>
					</div>
				<% } else if(message.type == 'success') { %>
					<div class="ui centered cards" style="margin-top: 1em">
						<div class="card">
							<div class="content">
								<a href="https://twitter.com/<%= link.owner.twitter.username %>" target="_blank">
									<img class="ui avatar image" src="<%= link.owner.twitter.image %>">
									<%= link.owner.twitter.username %>
								</a>
								<div class="right floated meta">
									<a href="/profile/<%= link.owner.twitter.username %>" id="<%= link.id %>-date"></a>
								</div>
							</div>
							<a class="image" href="<%= link.image %>" target="_blank">
								<img src="<%= link.image %>"/>
							</a>
							<div class="content">
								<div class="header">
									<a href="/profile/<%= link.owner.twitter.username %>"><%= link.title %></a>
								</div>
								<div class="meta">
									<% for (var j = 0; j < link.tags.length; j++) { %>
										<a><%= link.tags[j] %></a>
									<% } %>
								</div>
							</div>
							<div class="extra content">
								<span class="right floated meta">
									<a href="/profile/<%= link.owner.twitter.username %>"><%= link.createdAt.toLocaleDateString() %></a>
								</span>
								<span>
									<a>
										<i class="heart icon"></i>
									</a>
									<%= link.likes.length %>
									likes
								</span>
							</div>
						</div>
					</div>

					<div style="display:table; width: 100%">
						<div style="display:table-cell;vertical-align:middle;">
							<div style="text-align:center;">
								<a class="ui primary big button" href="/" style="margin-top: 1em">Home</a>
							</div>
						</div>
					</div>
				<% } %>
			<% } else { %>
				Undefined. You should not be here.
			<% } %>
		</div>

		<% include ../snippets/footer %>
		<script type="text/javascript" src="/js/datediff.js"></script>
		<script type="text/javascript">
			$('#<%= link.id %>').html(dateDifference(new Date('<%= link.updatedAt %>-dates'), new Date(), {compact: true}));
		</script>
	</body>
</html>
